<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="spring.model.mapper.communityMapper">

<select id="read" parameterType="int" resultType="communityDTO">
select no,content,id,wdate,picture
from community
where no = #{no}
</select>

	<select id="list" parameterType="Map" resultType="communityDTO">
		select no,id,wdate,itemNo,itemPicture,itemTitle, passwd
		from (select c.no as no,c.id as id,c.wdate as wdate,c.itemNo as itemNo,
		i.image as itemPicture,i.title as itemTitle, c.passwd as passwd
		from item i, community c
		where c.itemNo = i.itemno)
</select>

<insert id="create" parameterType="communityDTO">
INSERT INTO community(no, id, content,itemNo,picture,filesize,passwd,wdate)
 VALUES((SELECT NVL(MAX(no), 0) + 1 as no FROM community),
#{id},#{content},#{itemNo},#{picture, jdbcType=VARCHAR},#{filesize, jdbcType=VARCHAR},
#{passwd},sysdate)

</insert>
</mapper>